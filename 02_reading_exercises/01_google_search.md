# 01：Googleで検索して結果を確認する

## テストコード

```js
const { test, expect } = require('@playwright/test');

test('Googleで検索して結果を確認する', async ({ page }) => {
  await page.goto('https://www.google.com');
  await page.fill('input[name="q"]', 'Playwright');
  await page.keyboard.press('Enter');
  await page.waitForTimeout(2000);
  await expect(page).toHaveTitle(/Playwright/);
});
```

## 回答まとめ

### 1行目

```ja
const { test, expect } = require('@playwright/test');

```

#### 自分の回答

これは「Googleのサイトに遷移する」操作でいいか

※1行目を`await page.goto('https://www.google.com');`と勘違いしていた

#### 解説

#### 日本語での説明：

この行は、Playwrightのテスト機能（test）と検証機能（expect）を使えるようにするための準備をしているコードである。
- `require('@playwright/test') `は、Playwrightのテストライブラリを読み込む命令。
- `{ test, expect } `は、その中の「テストを書く関数（test）」と「結果を確認する関数（expect）」だけを取り出して使えるようにしている。

##### どういう意味か

このコードは「テストを書くための道具を用意している」と考えてOK。
画面操作そのものではなく、「これからテストコードを書きますよ」という宣言のようなもの。

##### イメージで例えると：

Playwrightは「Webブラウザを操作してテストするためのロボット」ですが、この行はそのロボットに命令を出せるリモコンを手元に準備している感じである。

##### よくある誤解：

> 「Googleのサイトに遷移する」ではない

実際にGoogleにアクセスする操作は、↓のこの行である

```js
await page.goto('https://www.google.com');
```
### 2行目

```ja
test('Googleで検索して結果を確認する', async ({ page }) => {
```

#### 自分の回答

※なおこちらも実際のやり取りでは抜かしていたため、後日改めて別トピを立てて回答し、解説をしてもらった

「Googleで検索して結果を確認する」ことをテストしますよ、と言う説明と言うか宣言しているコードだと思う

#### 解説

「『Googleで検索して結果を確認する』ことをテストしますよ、と言う説明と言うか宣言しているコードだと思います」は**正解に非常に近い**

##### 正解

このコード`test('Googleで検索して結果を確認する', async ({ page }) => { ... })`は、
「Googleで『Playwright』と検索し、その結果ページのタイトルに 'Playwright' が含まれていることを確認する」テストケースを定義している。

##### 解説

- `test(...)`は 1つのテストケース を定義するPlaywrightの関数である。
- `'Googleで検索して結果を確認する'`は **テストの名前（説明）**。この名前はテストレポートに表示され、何をテストしているかをわかりやすくする。
- `async ({ page }) => { ... }`の部分は**テストの処理本体**。ブラウザページ（`page`）を使って実際に操作を行う非同期関数である。

より正確に言うなら：
> 「Googleでの検索機能に関するテストケースを、'Googleで検索して結果を確認する' という名前で定義しており、その後に検索操作と期待結果の確認処理が続く」

### 3行目

```ja
await page.goto('https://www.google.com');
```

#### 自分の回答

「Googleのサイトに遷移する」でいいか

#### 解説

##### 日本語での正確な説明：

このコードは、
**「テスト中の仮想ブラウザで Google のトップページにアクセスする（＝遷移する）」**操作である。

- `page.goto(...) `は「指定したURLにアクセスする」命令。
-  `await`をつけることで、ページが完全に読み込まれるまで待つようにしている。

##### あなたの答え：

> Googleのサイトに遷移する

十分に合っています！特に初心者の説明としてはOK。（もっと正確に言うなら「Googleにアクセスする」や「Googleのページを開く」なども可）

##### 1つだけ補足すると：

`goto()`はただのリンククリックとは違い、URLを直接指定してブラウザをそのページにジャンプさせるという意味になる。

### 4行目

```ja
await page.fill('input[name="q"]', 'Playwright');
```

#### 自分の回答

検索ワード「q」を入力すると言う感じか。「input[name="q"]」の[name="q"]が入力値を指していると推測

#### 解説

##### 日本語での正確な説明：

このコードは、
> 「Googleの検索ボックスに 'Playwright' と入力する」

という操作を行っています。

##### 分解してみる：

| 部分                         | 意味                                             |
|----------------------------|--------------------------------------------------|
| `await`                    | 操作が完了するまで待機する（非同期処理）       |
| `page.fill(...)`           | 指定された入力欄に、文字を入力する命令         |
| `'input[name="q"]'`        | **検索欄の場所を特定するセレクタ**（HTML要素） |
| `'Playwright'`             | 実際に入力される文字列                         |


##### 特に注目ポイント：

`input[name="q"]`

- これは**HTMLの属性セレクタ**と呼ばる。
- `input`要素の中で、`name`属性が`"q"`になっているものを指す。
- Googleの検索フォームは実際に`name="q"`という構造になっており、検索欄を特定するための手がかりである。

##### あなたの表現：

> 検索ワード 'q' を入力する」「[name="q"] が入力値を指している」

近いですが、もう少し正確に言うなら：

> 「name="q" の属性を持つ検索ボックスに 'Playwright' という文字を入力する」

と表現するとなおよし

### ５行目

```ja
await page.keyboard.press('Enter');
```

#### 自分の回答

キーボードのEnterキーを押すでいいか

#### 解説

5行目のコードは、まさにその通り——**キーボードのEnterキーを押す**操作である。

##### 日本語での正確な説明：

このコードは：
> 仮想ブラウザ上で、Enterキーを押す操作を行う

という意味になる。

##### 詳しく見ると：

| 部分                       | 意味                                         |
|--------------------------|--------------------------------------------|
| `await`                  | 操作が終わるまで待つ                       |
| `page.keyboard`          | **仮想キーボードを操作するためのオブジェクト** |
| `.press('Enter')`        | **Enterキーを押す**という命令                 |

##### この操作の役割：

Google検索では、検索欄に入力した後に Enter を押すことで検索が実行されるが、このコードは、まさにその「検索実行」操作をエミュレートしている。

### ６行目

```ja
await page.waitForTimeout(2000);
```

#### 自分の回答

そのまま直訳すると操作が終わるまで待つと取れるので、それまでの流れから考えて検索結果が出るまで待つといった感じになるか。

#### 解説

##### 日本語での正確な説明：

このコードは：
> 2000ミリ秒（＝2秒）だけ、強制的に待機する

という意味である。

##### 補足：あなたの解釈について

> 操作が終わるまで待つ → 検索結果が出るまで待つ、という意図かな？

ほぼその通りである

ただし、ここで使われている`waitForTimeout()`は：
- 検索結果が出た」かどうかを確認して待っているわけではない
- **あくまで時間で指定された秒数だけ待機する**（画面がどうなっているかは気にしない）

という点がポイント。

##### つまり：

> 検索結果が表示されるまでにかかる時間を見越して、とりあえず2秒待ってみよう

という仮の待ち時間を入れている、というのがこのコードの意図である。

##### 補足情報（中級向け）：

より安定したテストを書くには`waitForTimeout()`の代わりに：

```ja
await page.waitForSelector('h3');  // 検索結果の見出しが出るのを待つ
```

のような「何かが画面に現れるまで待つ」方法が推奨される（いわゆるスマートな待機）。

### ７行目

```ja
await expect(page).toHaveTitle(/Playwright/);
```

#### 自分の回答

Playwrightの検索結果が表示されると言った感じか

#### 解説

7行目の`expect(...)`は、**検索結果のページが表示されたかを「ページタイトル」で確認する**操作である。

##### 日本語での正確な説明：

このコードは：
> ページのタイトルに 'Playwright' という文字が含まれていることを確認する

という意味になる。

##### 詳しく分解すると：

| 部分                        | 意味                                             |
|---------------------------|--------------------------------------------------|
| `await`                   | 検証が完了するまで待つ                           |
| `expect(page)`            | 今開いているページに対して期待（検証）する      |
| `.toHaveTitle(...)`       | ページタイトルが特定の内容を含んでいるか確認    |
| `/Playwright/`            | **正規表現**で「Playwright を含む文字列」か確認 |

#####  実際のGoogle検索ページで考えると：

検索後のページのタイトルは例えば：
> Playwright - Google 検索

というようなタイトルになる。

この中に "Playwright" が含まれていれば、「検索結果ページがちゃんと表示されたね」と判断できる、という仕組みです。
