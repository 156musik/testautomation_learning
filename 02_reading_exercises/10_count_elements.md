# 10：要素の数をカウントする

## テストコード

```js
import { test, expect } from '@playwright/test';

test('商品が1つ以上表示されていることを確認する', async ({ page }) => {
  await page.goto('https://example.com/items');
  const itemCount = await page.locator('.item').count();
  console.log(`表示されている商品数: ${itemCount}`);
  expect(itemCount).toBeGreaterThan(0);
});
```

### 問題

問１

上記のテストコードが行っている操作の流れを、日本語で説明してください。

問２

このテストコードで確認している観点（チェックポイント）は何でしょうか？

### 自分の回答

問１
1. Example.comサイトの商品ページ(items)に遷移する
2. 該当画面に表示されている商品数のカウントを行う
3. カウントが完了したことを確認する
4, 該当がめんに表示されている商品数の数を確認する

問２

該当画面の商品数の数が計算され、件数が正しいことの確認

### 回答/解説

#### 問１ 正解例：

1. Example.comの`items`ページに遷移する
2. CSSセレクタ`.item`に一致する要素（商品）が何個表示されているかをカウントする
3. その商品数をコンソールに出力する
4. 商品数が1個以上であることを検証する

##### ポイント補足：

- `.item`は商品を表す要素（たとえば`<div class="item">〜</div>`を指すCSSクラスである
- `count()`は該当する要素の数を整数で返す関数である
- `expect(itemCount).toBeGreaterThan(0);`によって、「商品が1つ以上表示されていること」がテストの合否条件になっている

#### 問2 正解例：

表示されている商品の個数が1つ以上存在しているかを確認すること

##### 補足：

「商品リストが空ではない」こと、つまり表示されるべき商品が正しく画面に描画されていることを確認している。

#### ユーザーの回答に対するフィードバック：

- 「カウントが完了したことを確認する」「件数が正しいことの確認」などの表現は、Playwrightでの自動テストにおける観点からはやや曖昧である。
    - カウントの完了は自動的に行われる処理であり、明示的な「確認処理」ではない。
    - 「正しい件数か」ではなく、**1件以上存在するか**が確認されている点が重要である。

### 追加質問

もし商品数が0件だったらエラーが表示されるから、1件以上あればOKというコードの認識でいいか。

#### 追加質問の解説

その認識で正しい。

今回のコードで確認しているのは次の部分である：

```js
expect(itemCount).toBeGreaterThan(0);
```

この部分が意味するのは：

> `itemCount（商品数`**が 0 より大きい（＝1件以上ある）ことを期待する**

ということである。

#### 補足ポイント

- もし商品が1件もなければ（＝itemCountが0）、この`expect`が失敗し、テスト全体がエラーとして停止します。
- 逆に、商品が1件以上あれば、この`expect`は成功と判定され、テストは正常終了します。

#### まとめ

- 商品が1件以上 ⇒ テスト合格
- 商品が0件 ⇒ エラー（テスト失敗）

この考え方は、他の要素の確認（例：ボタン、メッセージなど）でもよく使う。
